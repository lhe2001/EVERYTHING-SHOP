/* h2db 세팅 후 테스트용 ddl*/
drop table if exists sample_table CASCADE;
create table sample_table
(
    id bigint generated by default as identity,
    name varchar(255),
    primary key (id)
);
/*ERD cloud*/
CREATE TABLE USER_M (
    USER_NUM	NUMBER(10)		NOT NULL,
    USER_ID	VARCHAR2(30)		NOT NULL,
    USER_PW	VARCHAR(100)		NOT NULL,
    USER_ROLE_CD	VARCHAR2(10)	DEFAULT 01	NOT NULL,
    REGISTER_DT	DATE	DEFAULT SYSDATE	NOT NULL,
    CHANGE_DT	DATE	DEFAULT SYSDATE	NOT NULL
);

COMMENT ON COLUMN USER_M.USER_NUM IS '사용자번호';

COMMENT ON COLUMN USER_M.USER_ID IS '사용자ID';

COMMENT ON COLUMN USER_M.USER_PW IS '비밀번호';

COMMENT ON COLUMN USER_M.USER_ROLE_CD IS '역할코드';

COMMENT ON COLUMN USER_M.REGISTER_DT IS '등록일자';

COMMENT ON COLUMN USER_M.CHANGE_DT IS '수정일자';

CREATE TABLE PRODUCT_M (
   PRODUCT_NUM	NUMBER(10)		NOT NULL,
   USER_NUM	NUMBER(10)		NOT NULL,
   PRODUCT_NAME	VARCHAR2(300)		NOT NULL,
   QUANTITY	NUMBER(10)	DEFAULT 0	NOT NULL,
   PRICE	NUMBER(50)	DEFAULT 0	NOT NULL,
   PRODUCT_STTS	VARCHAR2(5)	DEFAULT 01	NOT NULL,
   REGISTER_DT	DATE	DEFAULT SYSDATE	NOT NULL,
   CHANGE_DT	DATE	DEFAULT SYSDATE	NOT NULL
);

COMMENT ON COLUMN PRODUCT_M.PRODUCT_NUM IS '상품번호';

COMMENT ON COLUMN PRODUCT_M.USER_NUM IS '사용자번호';

COMMENT ON COLUMN PRODUCT_M.PRODUCT_NAME IS '상품명';

COMMENT ON COLUMN PRODUCT_M.QUANTITY IS '수량';

COMMENT ON COLUMN PRODUCT_M.PRICE IS '가격';

COMMENT ON COLUMN PRODUCT_M.PRODUCT_STTS IS '판매상태';

COMMENT ON COLUMN PRODUCT_M.REGISTER_DT IS '등록일자';

COMMENT ON COLUMN PRODUCT_M.CHANGE_DT IS '수정일자';

CREATE TABLE ORDER_M (
     ORDER_NUM	NUMBER(10)		NOT NULL,
     USER_NUM	NUMBER(10)		NOT NULL,
     ORDER_STTS	VARCHAR2(5)	DEFAULT 01	NOT NULL,
     REGISTER_DT	DATE	DEFAULT SYSDATE	NOT NULL,
     CHANGE_DT	DATE	DEFAULT SYSDATE	NOT NULL
);

COMMENT ON COLUMN ORDER_M.ORDER_NUM IS '주문번호';

COMMENT ON COLUMN ORDER_M.USER_NUM IS '사용자번호';

COMMENT ON COLUMN ORDER_M.ORDER_STTS IS '주문상태';

COMMENT ON COLUMN ORDER_M.REGISTER_DT IS '등록일자';

COMMENT ON COLUMN ORDER_M.CHANGE_DT IS '수정일자';

CREATE TABLE ORDER_PRODUCT (
   ORDER_PRODUCT_NUM	NUMBER(10)		NOT NULL,
   ORDER_NUM	NUMBER(10)		NOT NULL,
   PRODUCT_NUM	NUMBER(10)		NOT NULL,
   QUANTITY	NUMBER(10)	DEFAULT 1	NOT NULL,
   REGISTER_DT	DATE	DEFAULT SYSDATE	NOT NULL,
   CHANGE_DT	DATE	DEFAULT SYSDATE	NOT NULL
);

COMMENT ON COLUMN ORDER_PRODUCT.ORDER_PRODUCT_NUM IS '주문상품번호';

COMMENT ON COLUMN ORDER_PRODUCT.ORDER_NUM IS '주문번호';

COMMENT ON COLUMN ORDER_PRODUCT.PRODUCT_NUM IS '상품번호';

COMMENT ON COLUMN ORDER_PRODUCT.QUANTITY IS '수량';

COMMENT ON COLUMN ORDER_PRODUCT.REGISTER_DT IS '등록일자';

COMMENT ON COLUMN ORDER_PRODUCT.CHANGE_DT IS '수정일자';

ALTER TABLE USER_M ADD CONSTRAINT PK_USER_M PRIMARY KEY (
    USER_NUM
    );

ALTER TABLE PRODUCT_M ADD CONSTRAINT PK_PRODUCT_M PRIMARY KEY (
   PRODUCT_NUM
    );

ALTER TABLE ORDER_M ADD CONSTRAINT PK_ORDER_M PRIMARY KEY (
   ORDER_NUM
    );

ALTER TABLE ORDER_PRODUCT ADD CONSTRAINT PK_ORDER_PRODUCT PRIMARY KEY (
    ORDER_PRODUCT_NUM
    );

ALTER TABLE USER_M ALTER COLUMN USER_NUM INT AUTO_INCREMENT;