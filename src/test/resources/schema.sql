/*
테스트용 테이블생성 ddl
테스트용으로 ddl을 생성하기위해서는
꼭 test폴더 아래 resource폴더 아래 schema.sql이라는 파일에 ddl을 작성해야된다.
그래서 추가적으로 테이블이 생성되더라도 이 파일에 작성해야됨.
 */
CREATE TABLE SAMPLE_TABLE (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR(255),
    PRIMARY KEY (ID)
);

CREATE TABLE USER_M (
    USER_NUM BIGINT NOT NULL,
    USER_ID VARCHAR(30) NOT NULL,
    USER_PW VARCHAR(100) NOT NULL,
    USER_ROLE VARCHAR(10) DEFAULT '01' NOT NULL,
    REGISTER_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CHANGE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT PK_USER_M PRIMARY KEY (USER_NUM)
);

COMMENT ON COLUMN USER_M.USER_NUM IS '사용자번호';
COMMENT ON COLUMN USER_M.USER_ID IS '사용자ID';
COMMENT ON COLUMN USER_M.USER_PW IS '비밀번호';
COMMENT ON COLUMN USER_M.USER_ROLE IS '역할코드';
COMMENT ON COLUMN USER_M.REGISTER_DT IS '등록일자';
COMMENT ON COLUMN USER_M.CHANGE_DT IS '수정일자';

CREATE TABLE PRODUCT_M (
   PRODUCT_NUM BIGINT NOT NULL,
   USER_NUM BIGINT NOT NULL,
   PRODUCT_NAME VARCHAR(300) NOT NULL,
   QUANTITY BIGINT DEFAULT 0 NOT NULL,
   PRICE DECIMAL(50,0) DEFAULT 0 NOT NULL,
   PRODUCT_STTS VARCHAR(5) DEFAULT '01' NOT NULL,
   REGISTER_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
   CHANGE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
   CONSTRAINT PK_PRODUCT_M PRIMARY KEY (PRODUCT_NUM)
);


COMMENT ON COLUMN PRODUCT_M.PRODUCT_NUM IS '상품번호';
COMMENT ON COLUMN PRODUCT_M.USER_NUM IS '사용자번호';
COMMENT ON COLUMN PRODUCT_M.PRODUCT_NAME IS '상품명';
COMMENT ON COLUMN PRODUCT_M.QUANTITY IS '수량';
COMMENT ON COLUMN PRODUCT_M.PRICE IS '가격';
COMMENT ON COLUMN PRODUCT_M.PRODUCT_STTS IS '판매상태';
COMMENT ON COLUMN PRODUCT_M.REGISTER_DT IS '등록일자';
COMMENT ON COLUMN PRODUCT_M.CHANGE_DT IS '수정일자';

CREATE TABLE ORDER_M (
     ORDER_NUM BIGINT NOT NULL,
     USER_NUM BIGINT NOT NULL,
     ORDER_STTS VARCHAR(5) DEFAULT '01' NOT NULL,
     REGISTER_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
     CHANGE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
     CONSTRAINT PK_ORDER_M PRIMARY KEY (ORDER_NUM)
);

COMMENT ON COLUMN ORDER_M.ORDER_NUM IS '주문번호';
COMMENT ON COLUMN ORDER_M.USER_NUM IS '사용자번호';
COMMENT ON COLUMN ORDER_M.ORDER_STTS IS '주문상태';
COMMENT ON COLUMN ORDER_M.REGISTER_DT IS '등록일자';
COMMENT ON COLUMN ORDER_M.CHANGE_DT IS '수정일자';

CREATE TABLE ORDER_PRODUCT (
   ORDER_PRODUCT_NUM BIGINT NOT NULL,
   ORDER_NUM BIGINT NOT NULL,
   PRODUCT_NUM BIGINT NOT NULL,
   QUANTITY NUMBER(10) DEFAULT 1 NOT NULL,
   REGISTER_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
   CHANGE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
   CONSTRAINT PK_ORDER_PRODUCT PRIMARY KEY (ORDER_PRODUCT_NUM)
);


COMMENT ON COLUMN ORDER_PRODUCT.ORDER_PRODUCT_NUM IS '주문상품번호';
COMMENT ON COLUMN ORDER_PRODUCT.ORDER_NUM IS '주문번호';
COMMENT ON COLUMN ORDER_PRODUCT.PRODUCT_NUM IS '상품번호';
COMMENT ON COLUMN ORDER_PRODUCT.QUANTITY IS '수량';
COMMENT ON COLUMN ORDER_PRODUCT.REGISTER_DT IS '등록일자';
COMMENT ON COLUMN ORDER_PRODUCT.CHANGE_DT IS '수정일자';

ALTER TABLE USER_M ALTER COLUMN USER_NUM BIGINT AUTO_INCREMENT NOT NULL;

ALTER TABLE PRODUCT_M ALTER COLUMN PRODUCT_NUM BIGINT AUTO_INCREMENT NOT NULL;

ALTER TABLE ORDER_M ALTER COLUMN ORDER_NUM BIGINT AUTO_INCREMENT NOT NULL;

ALTER TABLE ORDER_PRODUCT ALTER COLUMN ORDER_PRODUCT_NUM BIGINT AUTO_INCREMENT NOT NULL;